---
title: "Pandasã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ãŸã„å‚™å¿˜éŒ².2"
emoji: "ğŸ—’ï¸"
type: "idea"
topics:
  - "Python"
  - "pandas"
  - "å‚™å¿˜éŒ²"
published: true
published_at: "2022-06-27 15:56"
---

### å‰å›ã®è¨˜äº‹
https://zenn.dev/ha/articles/hayaa6211-pandas-master-1

### åŸºæœ¬çµ±è¨ˆé‡ã®ç¢ºèª
- å„åˆ—ã®åŸºæœ¬çµ±è¨ˆé‡ã‚’è¨ˆç®—ã—ãŸã„
```python
df.describe()
```

||||
|:-:|:-:|:--|
|count |æ¨™æœ¬æ•°ã€€ã€€ã€€ã€€ã€€   |è¡Œæ•°              | ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ |
|mean  |å¹³å‡å€¤             |ç®—è¡“å¹³å‡                                                   |
|std   |æ¨™æº–åå·®           |ãƒ‡ãƒ¼ã‚¿ã®ã°ã‚‰ã¤ã                                           |
|min   |æœ€å°å€¤             |æœ€ã‚‚å°ã•ã„å€¤                                               |
|25%   |ç¬¬1å››åˆ†ä½æ•°        |ãƒ‡ãƒ¼ã‚¿ã‚’é™é †ã«ä¸¦ã³æ›¿ãˆãŸã¨ãã€å¾ŒåŠã‹ã‚‰4åˆ†ã®1ç•ªç›®ã«ã‚ãŸã‚‹å€¤ |
|50%   |ç¬¬2å››åˆ†ä½æ•°(ä¸­å¤®å€¤)|ãƒ‡ãƒ¼ã‚¿ã‚’é™é †ã«ä¸¦ã³æ›¿ãˆãŸã¨ãã€å¾ŒåŠã‹ã‚‰4åˆ†ã®2ç•ªç›®ã«ã‚ãŸã‚‹å€¤ |  
|75%   |ç¬¬3å››åˆ†ä½æ•°        |ãƒ‡ãƒ¼ã‚¿ã‚’é™é †ã«ä¸¦ã³æ›¿ãˆãŸã¨ãã€å¾ŒåŠã‹ã‚‰4åˆ†ã®3ç•ªç›®ã«ã‚ãŸã‚‹å€¤ |  
|max   |æœ€å¤§å€¤ã€€ã€€ã€€ã€€     |æœ€ã‚‚å¤§ãã„å€¤                                               |
||||

### å€‹åˆ¥ã®çµ±è¨ˆé‡ã®è¨ˆç®—

||||
|:-:|:--|:--|
|è¦ç´ ã®å€‹æ•° |ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å.count() | |
|ç®—è¡“å¹³å‡|ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å.mean()| |
|æ¨™æº–åå·®|ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å.std()|n-1ã§å‰²ã£ãŸä¸åæ¨™æº–åå·® |
|æœ€å°å€¤|ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å.min()| |
|æœ€å¤§å€¤|ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å.max()| |
|ä¸­å¤®å€¤|ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å.median()| |
|æœ€é »å€¤|ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å.mode()|æœ€ã‚‚å‡ºç¾å›æ•°ã®å¤šã„å€¤ |
|ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªå€¤ã®å€‹æ•°|ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å.nuique()|é‡è¤‡ã‚’é™¤ã„ãŸå€¤ã®å€‹æ•° |
|ç‰¹å®šã®åˆ—ã®ãƒ¦ãƒ‹ãƒ¼ã‚¯å€¤ã®å‡ºç¾é »åº¦|ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å["åˆ—å"].value_counts()|Serieså‹ãƒ¡ã‚½ãƒƒãƒ‰|
||||

```python
df.nunique() -> pd.Series
# å„åˆ—ã®ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ•°

df["ç‰¹å®šã‚«ãƒ©ãƒ "].value_count() -> pd.Series
# ç‰¹å®šåˆ—ã®ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªå€¤ã®å‡ºç¾å›æ•°
```

### groupby
```python
df = pd.DataFrame({
    'city': ['osaka', 'osaka', 'osaka', 'osaka', 'tokyo', 'tokyo', 'tokyo'],
    'food': ['apple', 'orange', 'banana', 'banana', 'apple', 'apple', 'banana'],
    'price': [100, 200, 250, 300, 150, 200, 400],
    'quantity': [1, 2, 3, 4, 5, 6, 7]
})
df
```

| | city | food | price | quantity |
|---|------|------|-------|----------|
| 0 | osaka | apple | 100 | 1 |
| 1 | osaka | orange | 200 | 2 |
| 2 | osaka | banana | 250 | 3 |
| 3 | osaka | banana | 300 | 4 |
| 4 | tokyo | apple | 150 | 5 |
| 5 | tokyo | apple | 200 | 6 |
| 6 | tokyo | banana | 400 | 7 |

```python
object = df.groupby("ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ãŸã„åˆ—").é–¢æ•°
df.groupby("city").mean()
```

| city | price | quantity |
|------|-------|----------|
| osaka | 212.5 | 2.5 |
| tokyo | 250.0 | 6.0 |

#### indexã®è¡¨ç¤º
ã“ã‚Œã§indexè¡¨ç¤ºã—ã¦ãã‚Œã‚‹
```python
df.groupby(['city', 'food'], as_index=False).mean()
```

### ãƒ¡ã‚½ãƒƒãƒ‰ã®é©ç”¨
- count
    - æ¨™æœ¬æ•°`(æ¬ æå€¤ã‚’å«ã¾ãªã„)`
- size
    - æ¨™æœ¬æ•°`(æ¬ æå€¤ã‚’å«ã‚€)`
- sum
    - åˆè¨ˆ
- mean
    - å¹³å‡
- var
    - åˆ†æ•£
- std
    - æ¨™æº–åå·®
- max
    - æœ€å¤§å€¤
- min
    - æœ€å°å€¤
### aggã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
```python
df.groupby("ã‚«ãƒ©ãƒ ").agg(å‡¦ç†æ–¹æ³•)
```
- aggã¯ãƒªã‚¹ãƒˆã¨ã—ã¦å…¥ã‚Œã‚‰ã‚Œã‚‹ã‹ã‚‰ãã‚Œãã‚Œè¡¨ç¤ºã§ããŸã‚Šã‚‚ã™ã‚‹
- ã•ã‚‰ã«lambdaã‚’ä»£å…¥ã§ãã‚‹
```python
df.groupby("column").agg(lambda x: x*1.1)
# ãã‚Œãã‚Œ1.1å€ã«ãªã‚‹
```

### ãƒ”ãƒœãƒƒãƒˆãƒ†ãƒ¼ãƒ–ãƒ«
- ãƒ”ãƒœãƒƒãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯å€¤ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦çµ±è¨ˆé‡ã®ç®—å‡ºã‚’ã™ã‚‹ãŸã‚ã«ç”¨ã„ã‚‰ã‚Œã‚‹ï¼

```python
df.pivot_table(index = "ã¾ã¨ã‚ãŸã„å˜ä½",
                values = "ã¾ã¨ã‚ãŸã„åˆ—",
                aggfunc = "é›†è¨ˆæ–¹æ³•"
                )

df.pivot_table(index = "é›†è¨ˆå˜ä½",
                columns = "é›†è¨ˆå˜ä½2",
                values = "é›†è¨ˆã™ã‚‹åˆ—å",
                aggfunc = "é–¢æ•°",
                margins = "åˆè¨ˆåˆ—ã‚’è¿½åŠ ã™ã‚‹ã‹ã©ã†ã‹",
                margins_name = "åˆè¨ˆåˆ—ã®åå‰"
                )
```

### çµ‚ã‚ã‚Š
ãƒ”ãƒœãƒƒãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã¯æ­£ç›´ãŸãã•ã‚“ã‚„ã£ã¦æ„Ÿè¦šã§ãªã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ã¨æ€ã†ï¼ãã‚‚ãã‚‚ã„ã¤ä½¿ã†ã®ã‹ã„ã¾ã„ã¡ã‚ã‹ã£ã¦ãªã„ã‘ã©ã§ãã¦ã¦æã¯ãªã„ã‹ã‚‰ãƒã‚¹ã‚¿ãƒ¼ã—ãŸã„  
ä¹™
